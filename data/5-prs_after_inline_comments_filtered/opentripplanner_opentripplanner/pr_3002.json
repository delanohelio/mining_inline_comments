{"pr_number": 3002, "pr_title": "Routing request slak parameters", "pr_createdAt": "2020-03-10T20:51:43Z", "pr_url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3002", "timeline": [{"oid": "d076d93e6fd7b9cc4bec1fe35373512488dba00d", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/d076d93e6fd7b9cc4bec1fe35373512488dba00d", "message": "Raptor Documentation - Added documentation on the Range Raptor \"time-line\" and forward vs. reverse search.\n - Rename calculator 'latestArrivalTime' to 'stopArrivalTime'.", "committedDate": "2020-03-10T20:58:28Z", "type": "forcePushed"}, {"oid": "94c867511d59137d16b333bc77f8985600070b60", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/94c867511d59137d16b333bc77f8985600070b60", "message": "temp", "committedDate": "2020-03-17T11:09:17Z", "type": "forcePushed"}, {"oid": "3457f06013d2d0a0c1be96a01d9aa2debbe4b579", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/3457f06013d2d0a0c1be96a01d9aa2debbe4b579", "message": "Refactor RaptorTripPattern into 3 separate roles: RaptorRoute, RaptorTimeTable and RaptorTripPattern.", "committedDate": "2020-03-19T17:12:15Z", "type": "forcePushed"}, {"oid": "f25eb07a436c3816bbcab69d1d72fcb81abab977", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/f25eb07a436c3816bbcab69d1d72fcb81abab977", "message": "Map board and alight slack (default & pr mode) for RouterConfig and RoutingRequest to RaptorRequest.", "committedDate": "2020-03-23T12:32:45Z", "type": "forcePushed"}, {"oid": "66aeda57ea4730ea110aa60d29c6bb6545a7d646", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/66aeda57ea4730ea110aa60d29c6bb6545a7d646", "message": "Map board and alight slack (default & pr mode) for RouterConfig and RoutingRequest to RaptorRequest.", "committedDate": "2020-03-24T21:51:23Z", "type": "forcePushed"}, {"oid": "1d979dca2f3ee58725a852840fc7431a64645347", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/1d979dca2f3ee58725a852840fc7431a64645347", "message": "Merge remote-tracking branch 'entur/otp2_bugfix_routing_config_overloaded' into otp2_routing_request_slak_params", "committedDate": "2020-03-24T21:54:23Z", "type": "commit"}, {"oid": "97a99f7ec4554d0aeccb8b4f9a940cb7b8a7ec6f", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/97a99f7ec4554d0aeccb8b4f9a940cb7b8a7ec6f", "message": "Clean Code - Rename `TransferLeg` to `RaptorTransfer`.", "committedDate": "2020-03-24T21:56:40Z", "type": "commit"}, {"oid": "43aafd3bcaf5381f0706f12d296f084d2e3c645a", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/43aafd3bcaf5381f0706f12d296f084d2e3c645a", "message": "Refactor RaptorTripPattern into 3 separate roles: RaptorRoute, RaptorTimeTable and RaptorTripPattern.", "committedDate": "2020-03-24T21:56:51Z", "type": "commit"}, {"oid": "2b55f8101f8d2a89a409d92b0ec07816a21ae05d", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/2b55f8101f8d2a89a409d92b0ec07816a21ae05d", "message": "Added navigation from RaptorTripSchedule to RaptorTripPattern.\n - Renamed TransitDataProvider to RaptorTransitDataProvider.\n - Fixed a few spelling errors in TestRaptorTripSchedule.", "committedDate": "2020-03-24T21:56:55Z", "type": "commit"}, {"oid": "7d9fe2b499830e21b49122da97d2930893095391", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/7d9fe2b499830e21b49122da97d2930893095391", "message": "Implement board-slack in Raptor.", "committedDate": "2020-03-24T21:56:58Z", "type": "commit"}, {"oid": "a1b0b4c6e688dcf1c09febeb52d96169d4c902bb", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/a1b0b4c6e688dcf1c09febeb52d96169d4c902bb", "message": "Map board and alight slack (default & pr mode) for RouterConfig and RoutingRequest to RaptorRequest.", "committedDate": "2020-03-24T21:57:02Z", "type": "commit"}, {"oid": "5fe875acf0e63d9762348d9b60c771ecb73a004c", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/5fe875acf0e63d9762348d9b60c771ecb73a004c", "message": "Fix time-shift issues and add board and alight slack to Transmodel Graph QL API.\n  - Add toString to Raptor path classes to be able to debug the path more easily.\n  - Improve naming by more consistent naming.\n  - Improve unit tests.", "committedDate": "2020-03-30T17:14:22Z", "type": "commit"}, {"oid": "5fe875acf0e63d9762348d9b60c771ecb73a004c", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/5fe875acf0e63d9762348d9b60c771ecb73a004c", "message": "Fix time-shift issues and add board and alight slack to Transmodel Graph QL API.\n  - Add toString to Raptor path classes to be able to debug the path more easily.\n  - Improve naming by more consistent naming.\n  - Improve unit tests.", "committedDate": "2020-03-30T17:14:22Z", "type": "forcePushed"}, {"oid": "6b5c9da6144b814616896d1c60233a4f4180413b", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/6b5c9da6144b814616896d1c60233a4f4180413b", "message": "Merge remote-tracking branch 'otp/dev-2.x' into otp2_routing_request_slak_params", "committedDate": "2020-03-30T17:18:17Z", "type": "commit"}, {"oid": "060027d8097084b7325807d776c5277b72718d42", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/060027d8097084b7325807d776c5277b72718d42", "message": "Merge remote-tracking branch 'otp/dev-2.x' into otp2_routing_request_slak_params", "committedDate": "2020-03-31T09:51:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDgwNDgyMQ==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3002#discussion_r400804821", "bodyText": "reverseBoardSlack rather than revere", "author": "abyrd", "createdAt": "2020-03-31T10:26:03Z", "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/transit/ReverseSlackProvider.java", "diffHunk": "@@ -12,31 +13,39 @@\n  *\n  * @param <T> The TripSchedule type defined by the user of the raptor API.\n  */\n-public final class ReverseSlackProvider<T extends RaptorTripSchedule> implements SlackProvider<T> {\n+public final class ReverseSlackProvider<T extends RaptorTripSchedule> implements SlackProvider {\n \n-    private final int boardSlack;\n-    //private boolean ignoreTransferSlack;\n+    private final RaptorSlackProvider source;\n+    private boolean ignoreTransferSlack = true;\n+    private int reverseAlightSlack;\n+    private int revereBoardSlack;\n \n-    public ReverseSlackProvider(int boardSlack, WorkerLifeCycle lifeCycle) {\n-        this.boardSlack = boardSlack;\n-        //lifeCycle.onPrepareForNextRound(this::notifyNewRound);\n+    public ReverseSlackProvider(RaptorSlackProvider source, WorkerLifeCycle lifeCycle) {\n+        this.source = source;\n+        lifeCycle.onPrepareForNextRound(this::notifyNewRound);\n     }\n \n-    public final void notifyNewRound(int round) {\n-        //ignoreTransferSlack = round < 2;\n+    public void notifyNewRound(int round) {\n+        ignoreTransferSlack = round < 2;\n     }\n \n     @Override\n-    public final void setCurrentPattern(RaptorTripPattern pattern) { }\n+    public void setCurrentPattern(RaptorTripPattern pattern) {\n+        this.revereBoardSlack = source.alightSlack(pattern);", "originalCommit": "a1b0b4c6e688dcf1c09febeb52d96169d4c902bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f51f9e74b8dfd2c480d12957aac6439a27c950b6", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/f51f9e74b8dfd2c480d12957aac6439a27c950b6", "message": "Raptor documentation updated with board/alight slack implementation notes in the README.", "committedDate": "2020-03-31T11:54:10Z", "type": "commit"}, {"oid": "f51f9e74b8dfd2c480d12957aac6439a27c950b6", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/f51f9e74b8dfd2c480d12957aac6439a27c950b6", "message": "Raptor documentation updated with board/alight slack implementation notes in the README.", "committedDate": "2020-03-31T11:54:10Z", "type": "forcePushed"}, {"oid": "f4083618dc25a5d75649f21f44f125977f28cddb", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/f4083618dc25a5d75649f21f44f125977f28cddb", "message": "Update README.md", "committedDate": "2020-04-02T08:22:04Z", "type": "commit"}]}