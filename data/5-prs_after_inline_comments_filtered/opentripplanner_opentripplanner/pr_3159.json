{"pr_number": 3159, "pr_title": "Transmodel API changes", "pr_createdAt": "2020-08-25T11:54:51Z", "pr_url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3159", "timeline": [{"oid": "8785990cb28e9ba060bcf7be35fbfe7232e0ac22", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/8785990cb28e9ba060bcf7be35fbfe7232e0ac22", "message": "Add intermediate estimated calls to transmodel api", "committedDate": "2020-08-27T10:36:44Z", "type": "commit"}, {"oid": "7d3591bd247cb07c3b8b87a0894d0502c593180d", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/7d3591bd247cb07c3b8b87a0894d0502c593180d", "message": "Add from/to estimated calls to transmodel api", "committedDate": "2020-08-27T10:36:44Z", "type": "commit"}, {"oid": "cf26460e49d98c1d696d79334f7356f31ebc57df", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/cf26460e49d98c1d696d79334f7356f31ebc57df", "message": "Rename optimizeType to bicycleOptimizeType", "committedDate": "2020-08-27T10:55:01Z", "type": "commit"}, {"oid": "9003faf8e63fa788f577689f6ac5a25f0bfbb0bf", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/9003faf8e63fa788f577689f6ac5a25f0bfbb0bf", "message": "Remove allowBikeRental argument", "committedDate": "2020-08-27T10:55:43Z", "type": "commit"}, {"oid": "349f64b2d39ccd81d15908e05befcd333ff661ff", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/349f64b2d39ccd81d15908e05befcd333ff661ff", "message": "Remove vias argument", "committedDate": "2020-08-27T10:56:04Z", "type": "commit"}, {"oid": "349f64b2d39ccd81d15908e05befcd333ff661ff", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/349f64b2d39ccd81d15908e05befcd333ff661ff", "message": "Remove vias argument", "committedDate": "2020-08-27T10:56:04Z", "type": "forcePushed"}, {"oid": "639fcefb1388791a4b7c13c91c2acc7157bddcba", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/639fcefb1388791a4b7c13c91c2acc7157bddcba", "message": "Fix quay and stopPlace calls", "committedDate": "2020-08-27T12:27:41Z", "type": "commit"}, {"oid": "b1301f04c34d94d7e26d70a21a0f6584e973432a", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/b1301f04c34d94d7e26d70a21a0f6584e973432a", "message": "Prevent extra quotes in bikeRentalStation ids", "committedDate": "2020-08-27T13:32:53Z", "type": "commit"}, {"oid": "21753d0336fd678ca052f5ae05692bc9527b453f", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/21753d0336fd678ca052f5ae05692bc9527b453f", "message": "Set default values for maxItineraries and maxTransfers", "committedDate": "2020-08-28T09:02:24Z", "type": "commit"}, {"oid": "650fa68b11d04480f3a4335c8f27108040fab308", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/650fa68b11d04480f3a4335c8f27108040fab308", "message": "Rename OptimizationMethod graphql enum to BicycleOptimizationMethod", "committedDate": "2020-08-28T09:03:12Z", "type": "commit"}, {"oid": "030af50d4c335026e40b7880f5ca57c65400c63a", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/030af50d4c335026e40b7880f5ca57c65400c63a", "message": "Remove unused arguments for trip call", "committedDate": "2020-08-28T09:03:42Z", "type": "commit"}, {"oid": "aa63327a8e54da900bc550d374de0ad81b8749f3", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/aa63327a8e54da900bc550d374de0ad81b8749f3", "message": "Merge branch 'dev-2.x' into transmodel_estimated_calls", "committedDate": "2020-08-28T09:27:22Z", "type": "commit"}, {"oid": "885271b212d091e08d83b984269d5cdd3952f82b", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/885271b212d091e08d83b984269d5cdd3952f82b", "message": "Revert radius rename", "committedDate": "2020-08-28T10:23:22Z", "type": "commit"}, {"oid": "97de9589c01e0694ce082fcdebc01a927a9403a2", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/97de9589c01e0694ce082fcdebc01a927a9403a2", "message": "Merge branch 'transmodel_estimated_calls' of github.com:entur/OpenTripPlanner into transmodel_estimated_calls", "committedDate": "2020-08-28T10:23:50Z", "type": "commit"}, {"oid": "475d7bb81c7fca25219b0f2acd808095872a51c5", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/475d7bb81c7fca25219b0f2acd808095872a51c5", "message": "Set default non-transit distance to 5km/3miles in built-in client", "committedDate": "2020-08-31T12:39:45Z", "type": "commit"}, {"oid": "f92d025a5fa701c93a2c6ac07965a5eefed13f6e", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/f92d025a5fa701c93a2c6ac07965a5eefed13f6e", "message": "Sort list of slack defaults so that documentation string is deterministic", "committedDate": "2020-08-31T12:48:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDExNzkzMw==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3159#discussion_r480117933", "bodyText": "We should add a description as well, something like: \"The distance in meters to the given quay.\"", "author": "t2gran", "createdAt": "2020-08-31T13:08:42Z", "path": "src/ext/java/org/opentripplanner/ext/transmodelapi/model/stop/QuayAtDistanceType.java", "diffHunk": "@@ -31,7 +31,7 @@ public static GraphQLObjectType createQD(GraphQLOutputType quayType, Relay relay\n                     .build())\n             .field(GraphQLFieldDefinition.newFieldDefinition()\n                     .name(\"distance\")\n-                    .type(Scalars.GraphQLInt)\n+                    .type(Scalars.GraphQLFloat)", "originalCommit": "475d7bb81c7fca25219b0f2acd808095872a51c5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE0ODk4NQ==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3159#discussion_r480148985", "bodyText": "12 is a bit low - this should be set as high as possible without causing too much data to be returned to the client. This is a \"data transfer tuning\" parameter - we should adjust the search window to reduce the number of results. In the next version of the API, we will hopefully use the built in paging support in GraphQL - deprecating this parameter.\nThis should be documented at the end of the Query parameter changes section in the migration guide:\n\nnumItineraries The parameter is no longer used to terminate the request when the numItineraries is found. Instead the new searchWindow parameter is used to limit the search. The numItineraries will only filter the results AFTER the search is complete and reduce the number of itineraries as a threshold. The best option is to configure this on the server side and not use it as a client side input parameter. When the numItineraries reduces the result, a side effect is that OTP can not guarantee that an all pareto-optimal results are returned using the new paging functionality.", "author": "t2gran", "createdAt": "2020-08-31T13:57:52Z", "path": "src/main/java/org/opentripplanner/routing/api/request/RoutingRequest.java", "diffHunk": "@@ -246,7 +246,7 @@\n     public boolean wheelchairAccessible = false;\n \n     /** The maximum number of itineraries to return. */\n-    public int numItineraries = 3;\n+    public int numItineraries = 12;", "originalCommit": "f92d025a5fa701c93a2c6ac07965a5eefed13f6e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1058e70952385b45851d2bb2a437299661662f3a", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/1058e70952385b45851d2bb2a437299661662f3a", "message": "Add description on QuayAtDistanceType", "committedDate": "2020-09-01T07:12:59Z", "type": "commit"}, {"oid": "2eca123752656351527c3b9a9cc55788f40bc999", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/2eca123752656351527c3b9a9cc55788f40bc999", "message": "Merge branch 'dev-2.x' into transmodel_estimated_calls", "committedDate": "2020-09-01T09:15:15Z", "type": "commit"}, {"oid": "936e27102d96481c2d356122e02226914dd1a257", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/936e27102d96481c2d356122e02226914dd1a257", "message": "Document the new behaviour of the numItineraries and set the default to 50.", "committedDate": "2020-09-01T13:58:34Z", "type": "commit"}, {"oid": "936e27102d96481c2d356122e02226914dd1a257", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/936e27102d96481c2d356122e02226914dd1a257", "message": "Document the new behaviour of the numItineraries and set the default to 50.", "committedDate": "2020-09-01T13:58:34Z", "type": "forcePushed"}]}