{"pr_number": 9333, "pr_title": "MULE-18717: Cache MetadataType when declaring an Extension as part of\u2026", "pr_createdAt": "2020-09-01T15:07:54Z", "pr_url": "https://github.com/mulesoft/mule/pull/9333", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTgxMDUzNQ==", "url": "https://github.com/mulesoft/mule/pull/9333#discussion_r481810535", "bodyText": "static import", "author": "lucianoRM", "createdAt": "2020-09-02T07:03:52Z", "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/loader/java/type/runtime/ExtensionTypeWrapper.java", "diffHunk": "@@ -93,4 +101,35 @@ public String getVendor() {\n   public String getName() {\n     return extensionAnnotation.get().name();\n   }\n+\n+  private static class CachedClassTypeLoader implements ClassTypeLoader {\n+\n+    private ClassTypeLoader classTypeLoader;\n+\n+    private Map<Type, MetadataType> typeMetadataTypeMap = new HashMap<>();\n+    private Map<String, Optional<MetadataType>> typeIdentifierMetadataTypeMap = new HashMap<>();\n+\n+    public CachedClassTypeLoader(ClassTypeLoader classTypeLoader) {\n+      Objects.requireNonNull(classTypeLoader, \"classTypeLoader cannot be null\");", "originalCommit": "573ff352299640f8022c0d249006490ba3e71669", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2f607720ed167de509be003c36fb54ac6287d904", "url": "https://github.com/mulesoft/mule/commit/2f607720ed167de509be003c36fb54ac6287d904", "message": "MULE-18717: Cache MetadataType when declaring an Extension as part of ExtensionModelLoader process", "committedDate": "2020-09-02T16:43:14Z", "type": "commit"}, {"oid": "d805fe382840ec852b54cd3a9bb7a1df7f21c29c", "url": "https://github.com/mulesoft/mule/commit/d805fe382840ec852b54cd3a9bb7a1df7f21c29c", "message": "PR feedback", "committedDate": "2020-09-02T18:59:46Z", "type": "commit"}, {"oid": "d805fe382840ec852b54cd3a9bb7a1df7f21c29c", "url": "https://github.com/mulesoft/mule/commit/d805fe382840ec852b54cd3a9bb7a1df7f21c29c", "message": "PR feedback", "committedDate": "2020-09-02T18:59:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQxNTkwNQ==", "url": "https://github.com/mulesoft/mule/pull/9333#discussion_r482415905", "bodyText": "use a weakhashmap", "author": "marianogonzalez", "createdAt": "2020-09-02T20:26:11Z", "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/loader/java/type/runtime/ExtensionTypeWrapper.java", "diffHunk": "@@ -93,4 +101,35 @@ public String getVendor() {\n   public String getName() {\n     return extensionAnnotation.get().name();\n   }\n+\n+  private static class CachedClassTypeLoader implements ClassTypeLoader {\n+\n+    private ClassTypeLoader classTypeLoader;\n+\n+    private Map<Type, MetadataType> typeMetadataTypeMap = new HashMap<>();", "originalCommit": "d805fe382840ec852b54cd3a9bb7a1df7f21c29c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "77ea18192359a0431c2bedac3a09cbb3a2c912d6", "url": "https://github.com/mulesoft/mule/commit/77ea18192359a0431c2bedac3a09cbb3a2c912d6", "message": "PR feedback, weak hash map", "committedDate": "2020-09-02T21:00:54Z", "type": "commit"}]}