{"pr_number": 8594, "pr_title": "MULE-17975: Paging Provider is closed twice when it returns an empty page on the first call to getPage.", "pr_createdAt": "2020-01-17T19:48:00Z", "pr_url": "https://github.com/mulesoft/mule/pull/8594", "timeline": [{"oid": "bf3c4f5f3f679d39c7a1dcb72cd431cbe4c656fd", "url": "https://github.com/mulesoft/mule/commit/bf3c4f5f3f679d39c7a1dcb72cd431cbe4c656fd", "message": "fix", "committedDate": "2020-01-17T19:45:02Z", "type": "commit"}, {"oid": "8616d5e7a71feddbd2788ec0aff1778117f2eb3b", "url": "https://github.com/mulesoft/mule/commit/8616d5e7a71feddbd2788ec0aff1778117f2eb3b", "message": "atomic boolean +  test case", "committedDate": "2020-01-17T21:05:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODE0MDg3NQ==", "url": "https://github.com/mulesoft/mule/pull/8594#discussion_r368140875", "bodyText": "You have yo use compareAndSet", "author": "Bardammu", "createdAt": "2020-01-17T21:20:02Z", "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/runtime/streaming/PagingProviderWrapper.java", "diffHunk": "@@ -47,8 +48,10 @@ public PagingProviderWrapper(PagingProvider<C, T> delegate, ExtensionModel exten\n    */\n   @Override\n   public void close(C connection) throws MuleException {\n-    closed = true;\n-    delegate.close(connection);\n+    if (!closed.get()) {\n+      closed.set(true);", "originalCommit": "8616d5e7a71feddbd2788ec0aff1778117f2eb3b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODE0MzQ3Mw==", "url": "https://github.com/mulesoft/mule/pull/8594#discussion_r368143473", "bodyText": "nice catch", "author": "SebaElizalde", "createdAt": "2020-01-17T21:27:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODE0MDg3NQ=="}], "type": "inlineReview"}, {"oid": "f906a78f7c8ad2ed6dee50dc8fad823f6bf255cd", "url": "https://github.com/mulesoft/mule/commit/f906a78f7c8ad2ed6dee50dc8fad823f6bf255cd", "message": "compare and set", "committedDate": "2020-01-17T21:25:44Z", "type": "commit"}]}