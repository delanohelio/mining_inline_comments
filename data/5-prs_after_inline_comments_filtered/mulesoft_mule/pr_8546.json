{"pr_number": 8546, "pr_title": "MULE-17894: RETRY_EXHAUSTED ErrorType gets replaced by the ErrorType that generated the exhaustion (if present)", "pr_createdAt": "2020-01-07T04:03:16Z", "pr_url": "https://github.com/mulesoft/mule/pull/8546", "timeline": [{"oid": "9dfff03a874958f3373af5728d1b6254a33155cb", "url": "https://github.com/mulesoft/mule/commit/9dfff03a874958f3373af5728d1b6254a33155cb", "message": "MULE-17894: RETRY_EXHAUSTED ErrorType gets replaced by the ErrorType that generated the exhaustion (if present)", "committedDate": "2020-01-06T21:48:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzcyNzMxMg==", "url": "https://github.com/mulesoft/mule/pull/8546#discussion_r363727312", "bodyText": "should this be done internally by RetryPolicyExhaustedException? What other uses are there for it?", "author": "elrodro83", "createdAt": "2020-01-07T12:34:08Z", "path": "core/src/main/java/org/mule/runtime/core/internal/routing/UntilSuccessfulRouter.java", "diffHunk": "@@ -274,10 +274,12 @@ private CoreEvent eventWithCurrentContextDeleted(CoreEvent event) {\n       if (throwable instanceof MessagingException) {\n         exceptionEvent = ((MessagingException) throwable).getEvent();\n       }\n+      // MessagingException cause is set to null in order to avoid RETRY:EXHAUSTED ErrorType replacement\n+      // during ErrorType resolution (see ChainErrorHandlingUtils and MessagingExceptionResolver)\n       return new MessagingException(exceptionEvent,\n                                     new RetryPolicyExhaustedException(createStaticMessage(UNTIL_SUCCESSFUL_MSG_PREFIX,\n                                                                                           cause.getMessage()),\n-                                                                      cause, owner),\n+                                                                      null, owner),", "originalCommit": "9dfff03a874958f3373af5728d1b6254a33155cb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzczOTMzNQ==", "url": "https://github.com/mulesoft/mule/pull/8546#discussion_r363739335", "bodyText": "Excellent observation. I will check for the uses and make the change if possible.", "author": "IvanAndresFritzler", "createdAt": "2020-01-07T13:09:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzcyNzMxMg=="}], "type": "inlineReview"}, {"oid": "e3153971a81e018cc72baa6f8d99a962bcf838f7", "url": "https://github.com/mulesoft/mule/commit/e3153971a81e018cc72baa6f8d99a962bcf838f7", "message": "MULE-17894: Using more suitable constructor for RetryPolicyExhaustedException", "committedDate": "2020-01-07T16:44:32Z", "type": "commit"}]}