{"pr_number": 1235, "pr_title": "Add UndirectedGraph.vertexExists(node) method + NodeBreakerView.getOptionalTerminal(node)", "pr_createdAt": "2020-03-19T15:12:10Z", "pr_url": "https://github.com/powsybl/powsybl-core/pull/1235", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM1MzMzNA==", "url": "https://github.com/powsybl/powsybl-core/pull/1235#discussion_r396353334", "bodyText": "Is it OK to add a convenient public Optional<Terminal> getOptionalTerminal(int node). Returning null could introduce a lot of breaking changes in the client code. I think the optional version is safer.", "author": "mathbagu", "createdAt": "2020-03-23T10:36:09Z", "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/NodeBreakerVoltageLevel.java", "diffHunk": "@@ -590,7 +590,10 @@ public int getNode2(String switchId) {\n \n         @Override\n         public Terminal getTerminal(int node) {\n-            return graph.getVertexObject(node);\n+            if (graph.vertexExists(node)) {\n+                return graph.getVertexObject(node);\n+            }\n+            return null;", "originalCommit": "e77b499e767fab289bf17d408972c01984eae651", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM1NDYyMQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1235#discussion_r396354621", "bodyText": "I think you should not change the existing code: it's not necessary to extract the checkInvalidVertex in a method, consider duplicate the test here", "author": "mathbagu", "createdAt": "2020-03-23T10:38:08Z", "path": "math/src/main/java/com/powsybl/math/graph/UndirectedGraphImpl.java", "diffHunk": "@@ -149,6 +159,12 @@ public void addVertexIfNotPresent(int v) {\n         notifyListener();\n     }\n \n+    @Override\n+    public boolean vertexExists(int v) {\n+        checkInvalidVertex(v);\n+        return v < vertices.size() && vertices.get(v) != null;\n+    }", "originalCommit": "e77b499e767fab289bf17d408972c01984eae651", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "80392304bce2153318ffeae9305441ae54167c23", "url": "https://github.com/powsybl/powsybl-core/commit/80392304bce2153318ffeae9305441ae54167c23", "message": "Add UndirectedGraph.vertexExists() method + change NodeBreakerView.getTerminal(node) behaviour\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\nrevert getTerminal and create getOptionalTerminal\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\nrevert\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\ncorrection\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>", "committedDate": "2020-03-24T11:54:24Z", "type": "commit"}, {"oid": "9aa536afae7dafcc232e6059f5f464b24caa2998", "url": "https://github.com/powsybl/powsybl-core/commit/9aa536afae7dafcc232e6059f5f464b24caa2998", "message": "add test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\ncorrect test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\nadd test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>", "committedDate": "2020-03-24T11:54:24Z", "type": "commit"}, {"oid": "9aa536afae7dafcc232e6059f5f464b24caa2998", "url": "https://github.com/powsybl/powsybl-core/commit/9aa536afae7dafcc232e6059f5f464b24caa2998", "message": "add test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\ncorrect test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\nadd test\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>", "committedDate": "2020-03-24T11:54:24Z", "type": "forcePushed"}]}