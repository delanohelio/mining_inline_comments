{"pr_number": 1495, "pr_title": "IIDM validation in 3w leg adder: substation id in the error message", "pr_createdAt": "2020-10-02T09:53:49Z", "pr_url": "https://github.com/powsybl/powsybl-core/pull/1495", "timeline": [{"oid": "a85a0486eee9bdf1fb14182c7b583abf720bf583", "url": "https://github.com/powsybl/powsybl-core/commit/a85a0486eee9bdf1fb14182c7b583abf720bf583", "message": "IIDM validation in 3w leg adder: substation id in the error message\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-10-02T09:49:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc5ODYyNw==", "url": "https://github.com/powsybl/powsybl-core/pull/1495#discussion_r498798627", "bodyText": "Maybe also specify the voltage level in which the leg is?", "author": "MioRtia", "createdAt": "2020-10-02T12:46:32Z", "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/ThreeWindingsTransformerAdderImpl.java", "diffHunk": "@@ -161,7 +161,7 @@ public ThreeWindingsTransformerAdderImpl add() {\n \n         @Override\n         public String getMessageHeader() {\n-            return String.format(\"3 windings transformer leg%d: \", legNumber);\n+            return String.format(\"3 windings transformer leg%d in substation %s: \", legNumber, substation.getId());", "originalCommit": "a85a0486eee9bdf1fb14182c7b583abf720bf583", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkxOTgwMw==", "url": "https://github.com/powsybl/powsybl-core/pull/1495#discussion_r498919803", "bodyText": "I think that an error could also be thrown if there is no voltage level or it is invalid, so we should take into account that in the message header, complicating things in excess. I thought that adding the substation was enough to quickly find the transformer with the problem.", "author": "zamarrenolm", "createdAt": "2020-10-02T16:17:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc5ODYyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTM5Njk2MA==", "url": "https://github.com/powsybl/powsybl-core/pull/1495#discussion_r499396960", "bodyText": "You cannot have access to the voltage level from here because the leg is not yet attached to a VoltageLevel. From my point of view the message will be strange and confusing. What if we print the ID of the 3WT instead?", "author": "mathbagu", "createdAt": "2020-10-05T07:39:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc5ODYyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU3NTExMQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1495#discussion_r499575111", "bodyText": "@mathbagu The id of the transformer may also have not been set yet. The user is allowed to first build and add the legs and then set the id and name of the transformer. A currently valid way of building a three winding transformer is:\ntx = substation.newThreeWindingsTransformer()\n    .newLeg1()\n        .setRatedU(ratedU1)\n        .setR(r1).setX(x1).setG(g1).setB(b1)\n        .setConnectableBus(bus380.getId())\n        .setBus(bus380.getId())\n        .setVoltageLevel(vl380.getId())\n    .add()\n    .newLeg2()\n        ...\n    .add()\n    .newLeg3()\n        ...\n    .add()\n    .setId(txId)\n    .setName(txName)\n.add();\n\nSo the only data item that is present in all possible situations is the substation. When I built the message I found it was enough to locate a transformer where the error has been reported.", "author": "zamarrenolm", "createdAt": "2020-10-05T12:53:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc5ODYyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDA3Mzk4NA==", "url": "https://github.com/powsybl/powsybl-core/pull/1495#discussion_r500073984", "bodyText": "Okay, thank you for your reply, in this case, it is okay for me.", "author": "miovd", "createdAt": "2020-10-06T07:51:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc5ODYyNw=="}], "type": "inlineReview"}, {"oid": "cdfd37db3299f60ba9a744dbd2d8fc17066ee801", "url": "https://github.com/powsybl/powsybl-core/commit/cdfd37db3299f60ba9a744dbd2d8fc17066ee801", "message": "Merge branch 'master' into iidm_validation_message_3w_leg", "committedDate": "2020-10-09T06:33:54Z", "type": "commit"}, {"oid": "da68f277f91cbe6ae2beb1413531d7e34e68971e", "url": "https://github.com/powsybl/powsybl-core/commit/da68f277f91cbe6ae2beb1413531d7e34e68971e", "message": "Merge branch 'master' into iidm_validation_message_3w_leg", "committedDate": "2020-10-13T09:55:15Z", "type": "commit"}, {"oid": "a6bd9d1939cacbce32461d770d7d17b9832ec409", "url": "https://github.com/powsybl/powsybl-core/commit/a6bd9d1939cacbce32461d770d7d17b9832ec409", "message": "Merge branch 'master' into iidm_validation_message_3w_leg", "committedDate": "2020-11-05T09:16:19Z", "type": "commit"}, {"oid": "3742059a12c2344fa2033c244367e8b781a99f8e", "url": "https://github.com/powsybl/powsybl-core/commit/3742059a12c2344fa2033c244367e8b781a99f8e", "message": "Merge branch 'master' into iidm_validation_message_3w_leg", "committedDate": "2020-11-06T09:41:18Z", "type": "commit"}, {"oid": "5cd9509c9134936ac5ca945b86dbb6743dce5f3e", "url": "https://github.com/powsybl/powsybl-core/commit/5cd9509c9134936ac5ca945b86dbb6743dce5f3e", "message": "Merge branch 'master' into iidm_validation_message_3w_leg", "committedDate": "2020-11-06T09:42:09Z", "type": "commit"}, {"oid": "c0a26f1c564517209f58b190b78f490dfbf37820", "url": "https://github.com/powsybl/powsybl-core/commit/c0a26f1c564517209f58b190b78f490dfbf37820", "message": "adapt expected message in test\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-06T10:51:27Z", "type": "commit"}]}